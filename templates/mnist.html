<!DOCTYPE html>
{% load staticfiles %}
        <link rel="stylesheet" href="{% static 'css/linearicons.css' %}">
		<link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
		<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
		<link rel="stylesheet" href="{% static 'css/nice-select.css' %}">
		<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
		<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
		<link rel="stylesheet" href="{% static 'css/main.css' %}">
        <link rel="stylesheet" href="{% static 'css/drawingboard2.css' %}">
        <script src="{% static 'js/vendor/jquery-2.2.4.min.js' %}"></script>
		<script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
		<script src="{% static 'js/owl.carousel.min.js' %}"></script>
		<script src="{% static 'js/jquery.nice-select.min.js' %}"></script>
		<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
		<script src="{% static 'js/main.js' %}"></script>
<html lang="zxx" class="no-js">
<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
    {% load staticfiles %}
	<link rel="shortcut icon" href="{% static 'img/fav.png'%}">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>手写数字</title>

	<link href="https://fonts.googleapis.com/css?family=Poppins:100,300,500" rel="stylesheet">
		<!--
		CSS
		============================================= -->

	</head>
	<body class="dup-body">
		<div class="dup-body-wrap">
			<!-- Start Header Area -->
			<header class="default-header">
				<div class="header-wrap">
					{% include 'head.html' %}
				</div>
			</header>
        </div>
		<!-- End Header Area -->
		<!-- Start Banner Area -->
		<section class="banner-area relative">
{#			<div class="overlay overlay-bg"></div>#}
			<div class="container">
				<div class="row fullscreen align-items-center justify-content-between">
                    <canvas id="myCanvas" width="400" height="250" style="border:1px solid #d3d3d3;">
{#                    <canvas class="drawing-board-canvas" width="280" height="280" style="width: 280px; height: 280px;"></canvas>#}
                    </canvas>
					<div class="col-lg-5 col-md-5 col-sm-4">
                        <a href="{% url 'model' %}" class="genric-btn info circle">开发者模式</a>
                        <h3>识别结果:3</h3>
					</div>
                    <div class="col-lg-5 col-md-5 col-sm-4"></div>
                    <div class="col-lg-5 col-md-5 col-sm-4">
                        <a href="javascript:void(0);" class="genric-btn info circle" onclick="do_input()">读取图片</a>
                    </div>
				</div>
			</div>
		</section>

	</body>
</html>
<script>
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");

    var paint = false;
    ctx.strokeStyle="#000000";
    ctx.lineWidth = 10;
    ctx.borderRadius = 200;
    c.onmousedown = function(e){
        paint = !paint;
        ctx.moveTo(e.pageX-this.offsetLeft,e.pageY-this.offsetTop-50);
        console.log(e.pageX-this.offsetLeft, e.pageY-this.offsetTop);
    };

    c.onmousemove = function(e){
        if(paint){
        ctx.lineTo(e.pageX-this.offsetLeft,e.pageY-this.offsetTop-50);
        ctx.stroke();
        }
    };

    c.onmouseup = function(e){
        paint = !paint;
    };

    function do_input() {
        var inputObj = document.createElement('input');
        inputObj.addEventListener('change',readFile,false);
        inputObj.type='file';
        inputObj.accept = 'image/*';
        inputObj.id = "input_btn";
        inputObj.click();
    }

    function readFile() {
        var file = this.files[0];
        if (!/image\/\w+/.test(file.type)) {
            alert("Error type of file: Must be image.");
            return false;
        }
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function (e) {
            draw_to_canvas(this.result);
        }
    }

    function draw_to_canvas(imgData){
        var cvs = document.getElementById("myCanvas");
        var cvs_ctx = cvs.getContext('2d');
        var img = new Image;
            img.src = imgData;
            img.onload = function()
            {
                cvs_ctx.drawImage(img,0,0,cvs.width,cvs.height);
                strDataURI = cvs.toDataURL();
            }
    }
</script>